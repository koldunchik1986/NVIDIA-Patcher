# Linux NVIDIA Driver Patcher

Утилита для патчинга драйверов NVIDIA на Linux x64, позволяющая обходить ограничения и загружать неподписанные драйверы.

## Особенности

- Поддержка драйвера NVIDIA-Linux-x86_64-535.274.02.run
- **Поддержка майнинговых карт (P104-100, P106-100, P102-100)**
- **SLI поддержка для смешанных конфигураций карт**
- **AI/ML оптимизации для PyTorch, TensorFlow, LLM инференса**
- Автоматическое обнаружение установленных драйверов
- Создание резервных копий перед патчингом
- Возможность отката изменений
- Поддержка различных дистрибутивов Linux
- Подробное логирование операций

## Структура проекта

```
linux-nvidia-patcher/
├── src/                    # Основные исходные файлы
│   ├── patcher.py         # Главный модуль патчера
│   ├── driver_detector.py # Детектор драйверов
│   └── backup_manager.py  # Менеджер резервных копий
├── tools/                  # Вспомогательные утилиты
│   ├── extract_driver.sh  # Извлечение драйвера
│   └── verify_patch.py    # Проверка патча
├── patches/               # Файлы патчей
│   └── nvidia_535.patch   # Патч для версии 535.274.02
├── docs/                  # Документация
└── tests/                 # Тесты
```

## Требования

- Linux x64
- Права суперпользователя
- Установленный драйвер NVIDIA 535.274.02
- Python 3.6+
- Базовые утилиты (patch, grep, awk)

## Быстрый старт

```bash
# Скачайте и распакуйте проект
git clone <repository-url>
cd linux-nvidia-patcher

# Сделайте скрипты исполняемыми
chmod +x src/*.py tools/*.sh

# Запустите патчер с правами суперпользователя
sudo python3 src/patcher.py

# Или используйте автоматический режим
sudo python3 src/patcher.py --auto
```

## Использование

### Базовое использование

```bash
# Проверить наличие поддерживаемых драйверов и майнинговых карт
sudo python3 src/patcher.py --detect

# Применить патч с созданием бэкапа
sudo python3 src/patcher.py --patch

# Откатить изменения
sudo python3 src/patcher.py --rollback
```

### Работа с майнинговыми картами

```bash
# Идентификация майнинговых карт
sudo ./tools/mining_card_identifier.sh

# Патчинг с поддержкой майнинговых карт
sudo python3 src/patcher.py --patch --enable-mining-cards

# Настройка SLI для майнинговых карт
sudo python3 src/patcher.py --setup-sli
```

### AI/ML оптимизации

```bash
# Оптимизация для PyTorch обучения
sudo python3 src/patcher.py --ai-profile pytorch_training

# Оптимизация для LLM инференса
sudo python3 src/patcher.py --ai-profile llm_inference

# Автоматический AI профиль
sudo python3 src/patcher.py --ai-auto
```

### Расширенные опции

```bash
# Указать путь к драйверу вручную
sudo python3 src/patcher.py --driver-path /path/to/NVIDIA-Linux-x86_64-535.274.02.run

# Режим подробного вывода
sudo python3 src/patcher.py --verbose

# Тестовый режим (без применения изменений)
sudo python3 src/patcher.py --dry-run
```

## Поддерживаемые драйверы

- NVIDIA-Linux-x86_64-535.274.02.run (полная поддержка)
- Другие версии 535.xx (экспериментальная поддержка)

## Поддерживаемые майнинговые карты

- **P104-100** (эквивалент GTX 1080, 8GB) - ✅ Полная поддержка
- **P106-100** (эквивалент GTX 1060 6GB) - ✅ Полная поддержка  
- **P102-100** (эквивалент GTX 1070 Ti, 8GB) - ✅ Полная поддержка
- **P106-090** (эквивалент GTX 1060 3GB) - ✅ Полная поддержка
- **P104** (эквивалент GTX 1080 Ti, 11GB) - ✅ Полная поддержка

## AI/ML оптимизации

- **PyTorch Training** - оптимизация для обучения моделей
- **TensorFlow Inference** - ускорение инференса
- **LLM Inference** - оптимизация для больших языковых моделей
- **Stable Diffusion** - ускорение генерации изображений

## Принцип работы

1. **Обнаружение**: Сканирование системы на наличие установленных драйверов NVIDIA
2. **Бэкап**: Создание резервных копий модифицируемых файлов
3. **Патчинг**: Применение бинарных патчей к модулям драйвера
4. **Проверка**: Верификация успешности применения патчей
5. **Активация**: Перезагрузка модулей драйвера с новыми параметрами

## Безопасность

- Автоматическое создание резервных копий
- Проверка контрольных сумм файлов
- Возможность полного отката изменений
- Подробное логирование всех операций

## Поддержка

При возникновении проблем:
1. Проверьте логи в `/var/log/nvidia-patcher.log`
2. Используйте режим `--rollback` для отката изменений
3. Создайте issue с подробным описанием проблемы

## Лицензия

MIT License - см. файл LICENSE